{% extends "pages/base.html" %}
{% load i18n %}

{% block title %}{% trans "Order" %} {{ order.preference_id }}{% endblock %}

{% block content %}
<h2>{% trans "Order" %} {{ order.preference_id }}</h2>
<p class="text-muted">{% trans "Created on" %}: {{ order.created_at|date:"Y-m-d H:i" }}</p>

<div class="card mb-4">
  <div class="card-body">
    <p class="card-text mb-1"><strong>{% trans "Status" %}:</strong> {{ order.get_status_display }}</p>
    {% if order.payment_id %}
      <p class="card-text mb-1"><strong>{% trans "Payment ID" %}:</strong> {{ order.payment_id }}</p>
    {% endif %}
    {% if order.status_detail %}
      <p class="card-text mb-1"><strong>{% trans "Status detail" %}:</strong> {{ order.status_detail }}</p>
    {% endif %}
    <p class="card-text"><strong>{% trans "Total" %}:</strong> ${{ order.total }}</p>
  </div>
</div>

<div class="table-responsive">
  <table class="table table-bordered">
    <thead class="table-light">
      <tr>
        <th>{% trans "Product" %}</th>
        <th>{% trans "Quantity" %}</th>
        <th>{% trans "Unit price" %}</th>
        <th>{% trans "Subtotal" %}</th>
      </tr>
    </thead>
    <tbody>
      {% for item in order.items.all %}
        <tr>
          <td>{{ item.product_name }}</td>
          <td>{{ item.quantity }}</td>
          <td>${{ item.unit_price }}</td>
          <td>${{ item.get_total }}</td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

<a href="{% url 'orders_list' %}" class="btn btn-secondary">{% trans "Back to orders" %}</a>
<a href="{% url 'products' %}" class="btn btn-primary">{% trans "Continue shopping" %}</a>
{% endblock %}
