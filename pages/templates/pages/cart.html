{% extends "pages/base.html" %}
{% load i18n %}

{% block title %}{% trans "Cart" %}{% endblock %}

{% block content %}
<h2>ðŸ›’ {% trans "My Cart" %}</h2>

{% if cart_items %}
  <ul class="list-group">
    {% for item in cart_items %}
      <li class="list-group-item d-flex justify-content-between align-items-center">
        {{ item.product.name }} (x{{ item.quantity }})
        <span>${{ item.get_total }}</span>
        <a href="{% url 'remove_from_cart' item.product.id %}" class="btn btn-danger btn-sm">{% trans "Remove" %}</a>
      </li>
    {% endfor %}
  </ul>
  <h4 class="mt-3">{% trans "Total:" %} ${{ total }}</h4>
  <form method="post" action="{% url 'checkout' %}" class="mt-3">
    {% csrf_token %}
    <button type="submit" class="btn btn-primary" {% if not mercadopago_ready %}disabled{% endif %}>
      {% trans "Pay with Mercado Pago" %}
    </button>
  </form>
  {% if not mercadopago_ready %}
    <p class="text-muted mt-2">{% trans "Payment service is temporarily unavailable." %}</p>
  {% endif %}
{% else %}
  <p>{% trans "You have no products in the cart." %}</p>
{% endif %}
{% endblock %}
